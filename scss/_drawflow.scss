/**
 * Custom styles and colours for Drawflow.js nodes.
 * Version 1.0
 */

@use 'sass:math';
@use 'sass:color';

// Baseline saturation percentage.
$saturation: 60;

// Baseline lightness percentage.
$lightness: 90;

// Step counter
$step: 0;

:root {
  // Border colour
  --border-color: #cacaca;

  // Go through the entire 360 colour cycle, in 10 steps
  @for $i from 0 through 9 {
    // For each step

    // Step counter
    $step: $step + 1;

    // Default H/S/L
    $h: calc(#{$i} * 36);
    $s: $saturation;
    $l: $lightness;

    // 3-steps are one shade less saturated, one shade darker
    @if math.div($step, 3) == math.round(math.div($step, 3)) {
      $s: $saturation - 10;
      $l: $lightness - 10;
    }

    // Even steps are three shades more saturated
    @else if $step % 2 != 0 {
      $s: $saturation + 30;
      $l: $lightness;
    }

    // The header is one shade darker than the body
    $l_header: $l - 10;

    // Each step has two variables the ps-step and the ps-step-header
    --ps-#{$step}-header: hsl(#{$h} #{$s}% #{$l_header}.0%);
    --ps-#{$step}: hsl(#{$h} #{$s}% #{$l}.0%);
  }
}

@for $step from 1 through 10 {
  /**
 * The ps-#{$step} card.
 */
  .ps-#{$step}-card {
     margin-bottom:0;
     border:5px solid var(--ps-#{$step});
     background-color:var(--ps-#{$step});
   }

  /**
   * The ps-#{$step} card with striped borders.
   */
  .ps-#{$step}-striped-border {
     background-image: repeating-linear-gradient(45deg, var(--ps-#{$step}-header), var(--ps-#{$step}-header) 12px, transparent 12px, transparent 19px, var(--ps-#{$step}-header) 19px), repeating-linear-gradient(135deg, var(--ps-#{$step}-header), var(--ps-#{$step}-header) 12px, transparent 12px, transparent 19px, var(--ps-#{$step}-header) 19px), repeating-linear-gradient(225deg, var(--ps-#{$step}-header), var(--ps-#{$step}-header) 12px, transparent 12px, transparent 19px, var(--ps-#{$step}-header) 19px), repeating-linear-gradient(315deg, var(--ps-#{$step}-header), var(--ps-#{$step}-header) 12px, transparent 12px, transparent 19px, var(--ps-#{$step}-header) 19px);
     background-size: 4px 100%, 100% 4px, 4px 100% , 100% 4px;
     background-position: 0 0, 0 0, 100% 0, 0 100%;
     background-repeat: no-repeat;
     border:none;
     padding: 10px;
   }

  /**
   * The ps-#{$step} card header.
   */
  .ps-#{$step}-card > .card-header {
     background-color: var(--ps-#{$step}-header);
     padding:5px 8px;
     border-bottom:none;
     border-radius: calc(0.25rem - 1px);
     box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.09) inset;
     -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.09) inset;
     -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.09) inset;
   }
}

/**
 * Dots background, used by questionnaires.
 */
.bg-dots {
  background: radial-gradient($border-color 8%, transparent 11%) -4px -1px / 31px 31px;
}

/**
 * Lines background, used by workflows.
 */
.bg-lines {
  background-size: 25px 25px;
  background-image:
          linear-gradient(to right, #f1f1f1 1px, transparent 1px),
          linear-gradient(to bottom, #f1f1f1 1px, transparent 1px);
}

.bg-blueprint {
  background-color: #269;
  background-image:
          linear-gradient(		rgba(0,0,0,.10) 2px, transparent 2px),
          linear-gradient(90deg,rgba(0,0,0,.10) 2px, transparent 2px),
          linear-gradient(		rgba(0,0,0,.05) 1px, transparent 1px),
          linear-gradient(90deg,rgba(0,0,0,.05) 1px, transparent 1px);
  background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
  background-position: -2px -2px, -2px -2px, -1px -1px, -1px -1px;
}

/**
 * Node prototype
 */
.drawflow .drawflow-node {
  margin-bottom:.5rem;
  border: 1px solid var(--border-color);
  -webkit-box-shadow: 0 2px 4px 0px var(--border-color);
  box-shadow: 0 2px 4px 0px var(--border-color);
  padding: 0px;
  width: 200px;
  border-radius: 4px;
  background: none;
  //display: block;
}

.drawflow .drawflow-node.selected {
  background: none;
  border: 1px solid hsl(0deg 0% 36%);
  -webkit-box-shadow: 0 2px 25px -8px hsl(0deg 0% 36%);
  box-shadow: 0 2px 25px -8px hsl(0deg 0% 36%);
}

.drawflow-node .inputs,
.drawflow-node .outputs
{
  //height: 25px !important;
  //width: 25px !important;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.drawflow .drawflow-node .input,
.drawflow .drawflow-node .output {
  height: 25px;
  width: 25px;
  border: 2px solid var(--border-color);
  background: white;
  position: unset;
}

//.drawflow .drawflow-node .input
//{
//  left: -8px;
//
//}
//.drawflow .drawflow-node .output
//{
//  left: -7px;
//  background: white;
//}